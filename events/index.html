<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Events - GMod9 Lua Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Events";
        var mkdocs_page_input_path = "events.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> GMod9 Lua Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../basics/">Basics</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../defines/">Defines</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Events</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#description">Description</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#syntax">Syntax</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#hookevent">HookEvent()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#unhookevent">UnHookEvent()</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#events_1">Events</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayeractivename-userid-steamid">eventPlayerActive(name, userid, steamid)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayerconnectname-address-steamid">eventPlayerConnect(name, address, steamid)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayerdisconnectname-userid-address-steamid-reason">eventPlayerDisconnect(name, userid, address, steamid, reason)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayerchangeteamname-userid-new_team-old_team">eventPlayerChangeTeam(name, userid, new_team, old_team)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayerkilleduserid-attacker-weapon">eventPlayerKilled(userid, attacker, weapon)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayernamechangeuserid-newname-oldname">eventPlayerNameChange(userid, newname, oldname)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayerhurtuserid-newhealth-attacker-when-newhealth-is-1-the-player-will-die-unless-you-update-their-health-using-_playersethealth">eventPlayerHurt(userid, newhealth, attacker) - When newhealth is 1, the player will die unless you update their health using _PlayerSetHealth()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pickdefaultspawnteamuserid-return-false-to-choose-a-random-valid-team">PickDefaultSpawnTeam(userid) - Return false to choose a random valid team</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayerspawnuserid">eventPlayerSpawn(userid)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayerspawnpropuserid-propname-return-true-to-allow">eventPlayerSpawnProp(userid, propname) - Return true to allow</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayerduplicatepropuserid-propid-return-true-to-allow">eventPlayerDuplicateProp(userid, propid) - Return true to allow</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayerspawnragdolluserid-propname-return-true-to-allow">eventPlayerSpawnRagdoll(userid, propname) - Return true to allow</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayerduplicateragdolluserid-propid-return-true-to-allow">eventPlayerDuplicateRagdoll(userid, propid) - Return true to allow</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayerpropspawneduserid-propid">eventPlayerPropSpawned(userid, propid)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayerragdollspawneduserid-propid">eventPlayerRagdollSpawned(userid, propid)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayersayuserid-strtext-bteam-player-will-say-returned-text-if-its-not-empty">eventPlayerSay(userid, strText, bTeam) - Player will 'say' returned text if it's not empty</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventpropbreakbreakerid-propid">eventPropBreak(breakerid, propid)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventnpckilledkillerid-killed-inflictor">eventNPCKilled(killerid, killed, inflictor)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#canplayerhaveitemplayerid-item-return-true-if-the-player-can-pickup-item">canPlayerHaveItem(playerid, item) - Return true if the player can pickup item</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayeruseentityplayerid-entity-return-true-to-disable-default-actions">eventPlayerUseEntity(playerid, entity) - Return true to disable default actions</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventplayerinitialspawnplayerid">eventPlayerInitialSpawn(playerid)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventkeypressedplayerid-in_key">eventKeyPressed(playerid, in_key)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#eventkeyreleasedplayerid-in_key">eventKeyReleased(playerid, in_key)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#onballoonexplodeballoon-killer">OnBalloonExplode(balloon, killer)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#onphystakedamageentid-inflictor-attacker">onPhysTakeDamage(entid, inflictor, attacker)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ontakedamageentid-inflictor-attacker-damage">onTakeDamage(entid, inflictor, attacker, damage)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#onplayerremoveplayerid-entity-return-true-if-player-can-delete-specified-entity">onPlayerRemove(playerid, entity) - Return true if player can delete specified entity</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ongravgunpuntplayerid-entity-return-true-to-allow">onGravGunPunt(playerid, entity) - Return true to allow</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ongravgunpickupplayerid-entity-return-true-to-allow">onGravGunPickup(playerid, entity) - Return true to allow</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ongravgunlaunchplayerid-entity-return-true-to-allow">onGravGunLaunch(playerid, entity) - Return true to allow</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ongravgundropplayerid-entity-return-true-to-allow">onGravGunDrop(playerid, entity) - Return true to allow</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#onphyspickupplayerid-entity-returntrue-to-allow">onPhysPickup(playerid, entity) - Returntrue` to allow</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#onphysfreezeplayerid-entity-returntrue-to-allow">onPhysFreeze(playerid, entity) - Returntrue` to allow</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#onphysdropplayer-entity-return-true-to-allow">onPhysDrop(player, entity) - Return true to allow</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#getplayerdamagescalehitgroup-is-set-to-1-by-default">GetPlayerDamageScale(hitgroup) - Is set to 1 by default</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#onshowhelpuserid-by-default-bound-to-f1">onShowHelp(userid) - By default bound to F1</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#onshowteamuserid-by-default-bound-to-f2">onShowTeam(userid) - By default bound to F2</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#onshowspare1userid-by-default-bound-to-f3">onShowSpare1(userid) - By default bound to F3</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#onshowspare2userid-by-default-bound-to-f4">onShowSpare2(userid) - By default bound to F4</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#chat-commands">Chat commands</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../faq/">Frequently Asked Questions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../playerinfo/">_PlayerInfo()</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../reference/">Lua Reference</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../sounds/">Sounds</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../spawnmenu/">Spawnmenu</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../timers/">Timers</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../traces/">Traces</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../vectors/">Vectors</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">GMod9 Lua Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>Events</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="events">Events</h1>
<h2 id="description">Description</h2>
<p>In short, events are functions that get called when a certan thing happens, like when a player is joining or they get killed.</p>
<h2 id="syntax">Syntax</h2>
<h3 id="hookevent"><code>HookEvent()</code></h3>
<p><strong>Arguments:</strong><br />
- <code>name</code> - Event type. Type: <code>string</code><br />
- <code>func</code> - Function that will be executed on event. Type: <code>function</code><br />
<strong>Returns:</strong><br />
- <code>id</code> - ID of the hook used for unhooking. Type: <code>number</code>  </p>
<h3 id="unhookevent"><code>UnHookEvent()</code></h3>
<p><strong>Arguments:</strong><br />
- <code>id</code> - ID of the hook. Type: <code>number</code><br />
<strong>Returns:</strong><br />
Nothing  </p>
<h2 id="events_1">Events</h2>
<h3 id="eventplayeractivename-userid-steamid"><code>eventPlayerActive(name, userid, steamid)</code></h3>
<h3 id="eventplayerconnectname-address-steamid"><code>eventPlayerConnect(name, address, steamid)</code></h3>
<h3 id="eventplayerdisconnectname-userid-address-steamid-reason"><code>eventPlayerDisconnect(name, userid, address, steamid, reason)</code></h3>
<h3 id="eventplayerchangeteamname-userid-new_team-old_team"><code>eventPlayerChangeTeam(name, userid, new_team, old_team)</code></h3>
<h3 id="eventplayerkilleduserid-attacker-weapon"><code>eventPlayerKilled(userid, attacker, weapon)</code></h3>
<h3 id="eventplayernamechangeuserid-newname-oldname"><code>eventPlayerNameChange(userid, newname, oldname)</code></h3>
<h3 id="eventplayerhurtuserid-newhealth-attacker-when-newhealth-is-1-the-player-will-die-unless-you-update-their-health-using-_playersethealth"><code>eventPlayerHurt(userid, newhealth, attacker)</code> - When <code>newhealth</code> is <code>1</code>, the player will die unless you update their health using <code>_PlayerSetHealth()</code></h3>
<h3 id="pickdefaultspawnteamuserid-return-false-to-choose-a-random-valid-team"><code>PickDefaultSpawnTeam(userid)</code> - Return <code>false</code> to choose a random valid team</h3>
<h3 id="eventplayerspawnuserid"><code>eventPlayerSpawn(userid)</code></h3>
<h3 id="eventplayerspawnpropuserid-propname-return-true-to-allow"><code>eventPlayerSpawnProp(userid, propname)</code> - Return <code>true</code> to allow</h3>
<h3 id="eventplayerduplicatepropuserid-propid-return-true-to-allow"><code>eventPlayerDuplicateProp(userid, propid)</code> - Return <code>true</code> to allow</h3>
<h3 id="eventplayerspawnragdolluserid-propname-return-true-to-allow"><code>eventPlayerSpawnRagdoll(userid, propname)</code> - Return <code>true</code> to allow</h3>
<h3 id="eventplayerduplicateragdolluserid-propid-return-true-to-allow"><code>eventPlayerDuplicateRagdoll(userid, propid)</code> - Return <code>true</code> to allow</h3>
<h3 id="eventplayerpropspawneduserid-propid"><code>eventPlayerPropSpawned(userid, propid)</code></h3>
<h3 id="eventplayerragdollspawneduserid-propid"><code>eventPlayerRagdollSpawned(userid, propid)</code></h3>
<h3 id="eventplayersayuserid-strtext-bteam-player-will-say-returned-text-if-its-not-empty"><code>eventPlayerSay(userid, strText, bTeam)</code> - Player will 'say' returned text if it's not empty</h3>
<h3 id="eventpropbreakbreakerid-propid"><code>eventPropBreak(breakerid, propid)</code></h3>
<h3 id="eventnpckilledkillerid-killed-inflictor"><code>eventNPCKilled(killerid, killed, inflictor)</code></h3>
<h3 id="canplayerhaveitemplayerid-item-return-true-if-the-player-can-pickup-item"><code>canPlayerHaveItem(playerid, item)</code> - Return <code>true</code> if the player can pickup item</h3>
<h3 id="eventplayeruseentityplayerid-entity-return-true-to-disable-default-actions"><code>eventPlayerUseEntity(playerid, entity)</code> - Return <code>true</code> to disable default actions</h3>
<h3 id="eventplayerinitialspawnplayerid"><code>eventPlayerInitialSpawn(playerid)</code></h3>
<h3 id="eventkeypressedplayerid-in_key"><code>eventKeyPressed(playerid, in_key)</code></h3>
<h3 id="eventkeyreleasedplayerid-in_key"><code>eventKeyReleased(playerid, in_key)</code></h3>
<h3 id="onballoonexplodeballoon-killer"><code>OnBalloonExplode(balloon, killer)</code></h3>
<h3 id="onphystakedamageentid-inflictor-attacker"><code>onPhysTakeDamage(entid, inflictor, attacker)</code></h3>
<h3 id="ontakedamageentid-inflictor-attacker-damage"><code>onTakeDamage(entid, inflictor, attacker, damage)</code></h3>
<h3 id="onplayerremoveplayerid-entity-return-true-if-player-can-delete-specified-entity"><code>onPlayerRemove(playerid, entity)</code> - Return <code>true</code> if player can delete specified entity</h3>
<h3 id="ongravgunpuntplayerid-entity-return-true-to-allow"><code>onGravGunPunt(playerid, entity)</code> - Return <code>true</code> to allow</h3>
<h3 id="ongravgunpickupplayerid-entity-return-true-to-allow"><code>onGravGunPickup(playerid, entity)</code> - Return <code>true</code> to allow</h3>
<h3 id="ongravgunlaunchplayerid-entity-return-true-to-allow"><code>onGravGunLaunch(playerid, entity)</code> - Return <code>true</code> to allow</h3>
<h3 id="ongravgundropplayerid-entity-return-true-to-allow"><code>onGravGunDrop(playerid, entity)</code> - Return <code>true</code> to allow</h3>
<h3 id="onphyspickupplayerid-entity-returntrue-to-allow"><code>onPhysPickup(playerid, entity) - Return</code>true` to allow</h3>
<h3 id="onphysfreezeplayerid-entity-returntrue-to-allow"><code>onPhysFreeze(playerid, entity) - Return</code>true` to allow</h3>
<h3 id="onphysdropplayer-entity-return-true-to-allow"><code>onPhysDrop(player, entity)</code> - Return <code>true</code> to allow</h3>
<h3 id="getplayerdamagescalehitgroup-is-set-to-1-by-default"><code>GetPlayerDamageScale(hitgroup)</code> - Is set to <code>1</code> by default</h3>
<h3 id="onshowhelpuserid-by-default-bound-to-f1"><code>onShowHelp(userid)</code> - By default bound to F1</h3>
<h3 id="onshowteamuserid-by-default-bound-to-f2"><code>onShowTeam(userid)</code> - By default bound to F2</h3>
<h3 id="onshowspare1userid-by-default-bound-to-f3"><code>onShowSpare1(userid)</code> - By default bound to F3</h3>
<h3 id="onshowspare2userid-by-default-bound-to-f4"><code>onShowSpare2(userid)</code> - By default bound to F4</h3>
<h2 id="examples">Examples</h2>
<h3 id="chat-commands">Chat commands</h3>
<pre><code>-- This will unhook previous hook if executing another time
if chat_commands then
    UnHookEvent(chat_commands.hook)
end

chat_commands = {
    prefix = &quot;!&quot;,
    commands = {
        help = function(playerid, args)
            _PrintMessage(playerid, HUD_PRINTTALK, &quot;Available Chat Commands&quot;)
            for command, _ in pairs(chat_commands.commands) do
                _PrintMessage(playerid, HUD_PRINTTALK, chat_commands.prefix .. command)
            end
        end,
        argtest = function(playerid, args)
            _PrintMessage(playerid, HUD_PRINTTALK, &quot;Here are your arguments:&quot;)
            for index, arg in pairs(args) do
                _PrintMessage(playerid, HUD_PRINTTALK, &quot;[&quot; .. index .. &quot;] &quot; .. arg)
            end
        end,
        kill = function(playerid, args)
            _PlayerKill(playerid)
        end,
        yeet = function(playerid, args)
            _EntSetVelocity(playerid, vector3(0, 0, 999999999))
        end
    }
}

chat_commands.hook = HookEvent(&quot;eventPlayerSay&quot;, function(playerid, message, _)
    -- For some reason, `message` also contains player's name, so we remove it. Also, space **MUST** be always present, check `key`
    message = string.gsub(message, _PlayerInfo(playerid, &quot;name&quot;) .. &quot;: &quot;, &quot;&quot;) .. &quot; &quot;
    if string.sub(message, 1, 1) == chat_commands.prefix then
        local key = string.sub(message, 2, string.find(message, &quot; &quot;) - 1)
        if chat_commands.commands[key] then
            message = string.sub(message, string.find(message, &quot; &quot;), string.len(message))
            local args = {}
            for arg in string.gfind(message, &quot;(%w+)&quot;) do
                table.insert(args, arg)
            end
            chat_commands.commands[key](playerid, args)
        end
    end
end)
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../defines/" class="btn btn-neutral float-left" title="Defines"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../faq/" class="btn btn-neutral float-right" title="Frequently Asked Questions">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../defines/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../faq/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
